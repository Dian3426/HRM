/**
 * Created by ML3426 on 2015/6/10 0010.
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a((typeof(jQuery)!="undefined")?jQuery:window.Zepto)}}(function(f){var b={};b.fileapi=f("<input type='file'/>").get(0).files!==undefined;b.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(r){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var s,D,m,p=this;if(typeof r=="function"){r={success:r}}else{if(r===undefined){r={}}}s=r.type||this.attr2("method");D=r.url||this.attr2("action");m=(typeof D==="string")?f.trim(D):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}r=f.extend(true,{url:m,success:f.ajaxSettings.success,type:s||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var w={};this.trigger("form-pre-serialize",[this,r,w]);if(w.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(r.beforeSerialize&&r.beforeSerialize(this,r)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var o=r.traditional;if(o===undefined){o=f.ajaxSettings.traditional}var h=[];var E,F=this.formToArray(r.semantic,h);if(r.data){r.extraData=r.data;E=f.param(r.data,o)}if(r.beforeSubmit&&r.beforeSubmit(F,this,r)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,r,w]);if(w.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,o);if(E){y=(y?(y+"&"+E):E)}if(r.type.toUpperCase()=="GET"){r.url+=(r.url.indexOf("?")>=0?"&":"?")+y;r.data=null}else{r.data=y}var v=[];if(r.resetForm){v.push(function(){p.resetForm()})}if(r.clearForm){v.push(function(){p.clearForm(r.includeHidden)})}if(!r.dataType&&r.target){var l=r.success||function(){};v.push(function(q){var k=r.replaceTarget?"replaceWith":"html";f(r.target)[k](q).each(l,arguments)})}else{if(r.success){v.push(r.success)}}r.success=function(K,J,L){var I=r.context||this;for(var q=0,k=v.length;q<k;q++){v[q].apply(I,[K,J,L||p,p])}};if(r.error){var z=r.error;r.error=function(J,I,k){var q=r.context||this;z.apply(q,[J,I,k,p])}}if(r.complete){var j=r.complete;r.complete=function(I,q){var k=r.context||this;j.apply(k,[I,q,p])}}var C=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!==""});var n=C.length>0;var B="multipart/form-data";var H=(p.attr("enctype")==B||p.attr("encoding")==B);var G=b.fileapi&&b.formdata;d("fileAPI :"+G);var g=(n||H)&&!G;var x;if(r.iframe!==false&&(r.iframe||g)){if(r.closeKeepAlive){f.get(r.closeKeepAlive,function(){x=u(F)})}else{x=u(F)}}else{if((n||H)&&G){x=t(F)}else{x=f.ajax(r)}}p.removeData("jqxhr").data("jqxhr",x);for(var A=0;A<h.length;A++){h[A]=null}this.trigger("form-submit-notify",[this,r]);return this;function i(q){var L=f.param(q,r.traditional).split("&");var k=L.length;var K=[];var J,I;for(J=0;J<k;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");K.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return K}function t(q){var k=new FormData();for(var J=0;J<q.length;J++){k.append(q[J].name,q[J].value)}if(r.extraData){var I=i(r.extraData);for(J=0;J<I.length;J++){if(I[J]){k.append(I[J][0],I[J][1])}}}r.data=null;var L=f.extend(true,{},f.ajaxSettings,r,{contentType:false,processData:false,cache:false,type:s||"POST"});if(r.uploadProgress){L.xhr=function(){var M=f.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var O=0;var N=Q.loaded||Q.position;var P=Q.total;if(Q.lengthComputable){O=Math.ceil(N/P*100)}r.uploadProgress(Q,N,P,O)},false)}return M}}L.data=null;var K=L.beforeSend;L.beforeSend=function(N,M){if(r.formData){M.data=r.formData}else{M.data=k}if(K){K.call(this,N,M)}};return f.ajax(L)}function u(af){var K=p[0],L,ab,V,ad,Y,N,Q,P,O,Z,ac,U;var ai=f.Deferred();ai.abort=function(aj){P.abort(aj)};if(af){for(ab=0;ab<h.length;ab++){L=f(h[ab]);if(e){L.prop("disabled",false)}else{L.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,r);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];P={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var al=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+al);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(ak){}N.attr("src",V.iframeSrc);P.error=al;if(V.error){V.error.call(V.context,P,al,aj)}if(ad){f.event.trigger("ajaxError",[P,V,al])}if(V.complete){V.complete.call(V.context,P,al)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[P,V])}if(V.beforeSend&&V.beforeSend.call(V.context,P,V)===false){if(V.global){f.active--}ai.reject();return ai}if(P.aborted){ai.reject();return ai}O=K.clk;if(O){Z=O.name;if(Z&&!O.disabled){V.extraData=V.extraData||{};V.extraData[Z]=O.value;if(O.type=="image"){V.extraData[Z+".x"]=K.clk_x;V.extraData[Z+".y"]=K.clk_y}}}var k=1;var R=2;function J(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var I=f("meta[name=csrf-token]").attr("content");var q=f("meta[name=csrf-param]").attr("content");if(q&&I){V.extraData=V.extraData||{};V.extraData[q]=I}function aa(){var ar=p.attr2("target"),an=p.attr2("action"),aj="multipart/form-data",ao=p.attr("enctype")||p.attr("encoding")||aj;K.setAttribute("target",Y);if(!s||/post/i.test(s)){K.setAttribute("method","POST")}if(an!=V.url){K.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!s||/post/i.test(s))){p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){U=setTimeout(function(){ac=true;X(k)},V.timeout)}function aq(){try{var at=J(Q).readyState;d("state = "+at);if(at&&at.toLowerCase()=="uninitialized"){setTimeout(aq,50)}}catch(au){d("Server abort: ",au," (",au.name,")");X(R);if(U){clearTimeout(U)}U=undefined}}var ap=[];try{if(V.extraData){for(var ak in V.extraData){if(V.extraData.hasOwnProperty(ak)){if(f.isPlainObject(V.extraData[ak])&&V.extraData[ak].hasOwnProperty("name")&&V.extraData[ak].hasOwnProperty("value")){ap.push(f('<input type="hidden" name="'+V.extraData[ak].name+'">').val(V.extraData[ak].value).appendTo(K)[0])}else{ap.push(f('<input type="hidden" name="'+ak+'">').val(V.extraData[ak]).appendTo(K)[0])}}}}if(!V.iframeTarget){N.appendTo("body")}if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}setTimeout(aq,15);try{K.submit()}catch(al){var am=document.createElement("form").submit;am.apply(K)}}finally{K.setAttribute("action",an);K.setAttribute("enctype",ao);if(ar){K.setAttribute("target",ar)}else{p.removeAttr("target")}f(ap).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ar){if(P.aborted||M){return}ah=J(Q);if(!ah){d("cannot access response document");ar=R}if(ar===k&&P){P.abort("timeout");ai.reject(P,"timeout");return}else{if(ar==R&&P){P.abort("server abort");ai.reject(P,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",aj;try{if(ac){throw"timeout"}var ao=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+ao);if(!ao&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;P.responseText=at?at.innerHTML:null;P.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(ao){V.dataType="xml"}P.getResponseHeader=function(av){var aw={"content-type":V.dataType};return aw[av.toLowerCase()]};if(at){P.status=Number(at.getAttribute("status"))||P.status;P.statusText=at.getAttribute("statusText")||P.statusText}var ak=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(ak);if(aq||V.textarea){var ap=ah.getElementsByTagName("textarea")[0];if(ap){P.responseText=ap.value;P.status=Number(ap.getAttribute("status"))||P.status;P.statusText=ap.getAttribute("statusText")||P.statusText}else{if(aq){var al=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(al){P.responseText=al.textContent?al.textContent:al.innerText}else{if(au){P.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(ak=="xml"&&!P.responseXML&&P.responseText){P.responseXML=W(P.responseText)}}try{ag=S(P,ak,V)}catch(am){an="parsererror";P.error=aj=(am||an)}}catch(am){d("error caught: ",am);an="error";P.error=aj=(am||an)}if(P.aborted){d("upload aborted");an=null}if(P.status){an=(P.status>=200&&P.status<300||P.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",P)}ai.resolve(P.responseText,"success",P);if(ad){f.event.trigger("ajaxSuccess",[P,V])}}else{if(an){if(aj===undefined){aj=P.statusText}if(V.error){V.error.call(V.context,P,an,aj)}ai.reject(P,"error",aj);if(ad){f.event.trigger("ajaxError",[P,V,aj])}}}if(ad){f.event.trigger("ajaxComplete",[P,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,P,an)}M=true;if(V.timeout){clearTimeout(U)}setTimeout(function(){if(!V.iframeTarget){N.remove()}else{N.attr("src",V.iframeSrc)}P.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var T=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var S=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=T(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,c).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,c).bind("click.form-plugin",g,a)};function c(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g)}}function a(j){var l=j.target;var h=f(l);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}l=g[0]}var i=this;i.clk=l;if(l.type=="image"){if(j.offsetX!==undefined){i.clk_x=j.offsetX;i.clk_y=j.offsetY}else{if(typeof f.fn.offset=="function"){var k=h.offset();i.clk_x=j.pageX-k.left;i.clk_y=j.pageY-k.top}else{i.clk_x=j.pageX-l.offsetLeft;i.clk_y=j.pageY-l.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,r){var w=[];if(this.length===0){return w}var k=this[0];var z=this.attr("id");var p=x?k.getElementsByTagName("*"):k.elements;var A;if(p&&!/MSIE [678]/.test(navigator.userAgent)){p=f(p).get()}if(z){A=f(':input[form="'+z+'"]').get();if(A.length){p=(p||[]).concat(A)}}if(!p||!p.length){return w}var q,o,m,y,l,t,h;for(q=0,t=p.length;q<t;q++){l=p[q];m=l.name;if(!m||l.disabled){continue}if(x&&k.clk&&l.type=="image"){if(k.clk==l){w.push({name:m,value:f(l).val(),type:l.type});w.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}continue}y=f.fieldValue(l,true);if(y&&y.constructor==Array){if(r){r.push(l)}for(o=0,h=y.length;o<h;o++){w.push({name:m,value:y[o]})}}else{if(b.fileapi&&l.type=="file"){if(r){r.push(l)}var g=l.files;if(g.length){for(o=0;o<g.length;o++){w.push({name:m,value:g[o],type:l.type})}}else{w.push({name:m,value:"",type:l.type})}}else{if(y!==null&&typeof y!="undefined"){if(r){r.push(l)}w.push({name:m,value:y,type:l.type,required:l.required})}}}}if(!x&&k.clk){var s=f(k.clk),u=s[0];m=u.name;if(m&&!u.disabled&&u.type=="image"){w.push({name:m,value:s.val()});w.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(l){for(var m=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,l);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(m,h)}else{m.push(h)}}return m};f.fieldValue=function(h,j){var k=h.name,u=h.type,w=h.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!k||h.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!h.checked||(u=="submit"||u=="image")&&h.form&&h.form.clk!=h||w=="select"&&h.selectedIndex==-1)){return null}if(w=="select"){var p=h.selectedIndex;if(p<0){return null}var r=[],g=h.options;var m=(u=="select-one");var q=(m?p+1:g.length);for(var l=(m?p:0);l<q;l++){var o=g[l];if(o.selected){var s=o.value;if(!s){s=(o.attributes&&o.attributes.value&&!(o.attributes.value.specified))?o.text:o.value}if(m){return s}r.push(s)}}return r}return f(h).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}}));